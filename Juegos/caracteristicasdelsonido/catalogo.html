<!DOCTYPE html>
<html lang="es">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Catálogo de Juegos</title>

<style>
/* ============================= */
/* ===== BASE (Mobile First) ==== */
/* ============================= */

body, html {
  min-height: 100vh;
  margin: 0;
  padding: 0;
  font-family: Arial, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: #f0f0f0;
}

.container {
  text-align: center;
  width: 100%;
  background: #f0f0f0;
  box-sizing: border-box;
  min-height: 420px;
  position: relative;
  padding: 20px;
}

.container h2 {
  margin-top: 10px;
}

/* ============================= */
/* ===== Catálogo tipo página === */
/* ============================= */

.table-wrapper-horizontal {
  position: relative;
  overflow: hidden;
  width: 100%;
  margin: 30px 0;
}

.scroll-container {
  overflow: hidden;
  width: 100%;
}

.table-flex {
  display: flex;
  transition: transform 0.5s ease;
  width: 100%;
}

.cell {
  flex: 0 0 100%; /* 1 item por vista en móvil vertical */
  text-align: center;
  box-sizing: border-box;
  padding: 10px;
}

.cell a {
  display: block;
  text-decoration: none;
  color: inherit;
}

.cell img {
  width: 75%;
  max-width: 260px;
  height: auto;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  transition: transform 0.3s ease;
}

.cell img:hover {
  transform: scale(1.05);
}

.titulo-juego {
  display: block;
  margin-top: 14px;
  font-size: 20px;
  font-weight: bold;
  color: #2980b9;
}

/* ============================= */
/* ===== Flechas =============== */
/* ============================= */

.scroll-btn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 38px;
  height: 38px;
  font-size: 20px;
  border: none;
  background-color: rgba(0,0,0,0.45);
  color: white;
  cursor: pointer;
  border-radius: 50%;
  z-index: 10;
}

.scroll-btn.left { left: 8px; }
.scroll-btn.right { right: 8px; }

.scroll-btn:hover {
  background-color: rgba(0,0,0,0.8);
}

/* ============================= */
/* ===== Botones navegación ===== */
/* ============================= */

.nav-buttons {
  display: flex;
  flex-direction: column; /* Vertical por defecto */
  align-items: center;
  margin-top: 10px;
}

#backButton, 
#homeButton {
  width: 90%;
  max-width: 450px;
  padding: 12px 20px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: 16px;
  display: block;
  margin: 6px auto;
}

#backButton { background-color: #2980b9; color: white; }
#backButton:hover { background-color: #1c5ea8; }

#homeButton { background-color: #ddd; color: black; }
#homeButton:hover { background-color: #bbb; }

/* ======================================== */
/* ===== MÓVIL HORIZONTAL (<1024px) ====== */
/* ======================================== */

@media (max-width: 1023px) and (orientation: landscape) {

  .container {
    max-width: 750px;
    width: 95%;
    margin: 0 auto;
    padding: 5px;
  }

  .container h2 {
    margin-top: 0;
  }

  /* Reduce espacio debajo del carrusel */
  .table-wrapper-horizontal {
    margin: 5px 0 0px 0;
  }

  .cell {
    flex: 0 0 33.333%; /* 3 items por vista */
  }

  .cell img {
    width: 60%;
    max-width: 170px;
  }

  .titulo-juego {
    font-size: 18px;
  }

  /* Botones en línea */
  .nav-buttons {
    flex-direction: row;
    justify-content: center;
    gap: 12px; /* espacio entre botones */
  }

  #backButton,
  #homeButton {
    width: 50%;
    max-width: none;
    margin: 0;
  }
}

/* =============================== */
/* ===== ESCRITORIO (≥1024px) ==== */
/* =============================== */

@media (min-width: 1024px) {

  .container {
    border: 1px solid #ccc;
    border-radius: 5px;
    max-width: 800px;
    width: 95%;
    padding: 25px;
  }

  .cell {
    flex: 0 0 50%; /* 2 items por vista */
  }

  .cell img {
    width: 65%;
    max-width: 280px;
  }

  .titulo-juego {
    font-size: 22px;
  }

  .nav-buttons {
    flex-direction: row;
    justify-content: center;
    gap: 15px;
  }

  #backButton,
  #homeButton {
    width: 50%;
    max-width: none;
    margin: 0;
  }
}

/* ============================= */
/* ===== Mensaje inhabilitado === */
/* ============================= */

.message.inhabilitado {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: #ffcc00;
  color: #000;
  padding: 20px;
  border: 2px solid #333;
  border-radius: 10px;
  font-size: 20px;
  text-transform: uppercase;
  z-index: 9999;
  text-align: center;
  width: 80%;
  max-width: 300px;
  display: none;
}

</style>
</head>

<body>

<div class="container">
    <h2>Catálogo - República Argentina</h2>

    <div class="table-wrapper-horizontal">
        <button class="scroll-btn left" onclick="scrollTable(-1)">&#10094;</button>

        <div class="scroll-container">
            <div class="table-flex" id="tableFlex">

                <div class="cell">
                    <a href="Juego 01/gral/gral.html" onclick="setRutina('Juego 01')">
                        <img src="Imagenes/juego01.jpg" alt="Juego 01">
                        <span class="titulo-juego">Juego 01</span>
                    </a>
                </div>

                <div class="cell">
                    <a href="Juego 02/gral/gral.html" onclick="setRutina('Juego 02')">
                        <img src="Imagenes/juego02.jpg" alt="Juego 02">
                        <span class="titulo-juego">Juego 02</span>
                    </a>
                </div>

                <div class="cell">
                    <a href="Juego 03/gral/gral.html" onclick="setRutina('Juego 03')">
                        <img src="Imagenes/juego03.jpg" alt="Juego 03">
                        <span class="titulo-juego">Juego 03</span>
                    </a>
                </div>

                <div class="cell">
                    <a href="Juego 04/gral/gral.html" onclick="setRutina('Juego 04')">
                        <img src="Imagenes/juego04.jpg" alt="Juego 04">
                        <span class="titulo-juego">Juego 04</span>
                    </a>
                </div>

                <div class="cell">
                    <a href="Juego 05/gral/gral.html" onclick="setRutina('Juego 05')">
                        <img src="Imagenes/juego05.jpg" alt="Juego 05">
                        <span class="titulo-juego">Juego 05</span>
                    </a>
                </div>

            </div>
        </div>

        <button class="scroll-btn right" onclick="scrollTable(1)">&#10095;</button>
    </div>

<div class="nav-buttons">
  <button id="backButton" onclick="goBackToGames()">Volver al Menú Anterior</button>
  <button id="homeButton" onclick="goToHome()">Volver al Inicio</button>
</div>

</div>

<div id="message" class="message inhabilitado"></div>

<script>

/* ===== LÓGICA ORIGINAL (INTACTA) ===== */

let mensajePendiente = null;
let mensajeSecundario = null;
let audioPrimero = null;
let audioSegundo = null;

if (!localStorage.getItem("entrarA"))
  localStorage.setItem("entrarA", Math.floor(1000 + Math.random() * 9000));

if (!localStorage.getItem("entrarB"))
  localStorage.setItem("entrarB", "NO");

let entrarA = localStorage.getItem("entrarA");
let entrarB = localStorage.getItem("entrarB");

if (entrarA !== entrarB) {
    document.querySelector(".container").style.display = "none";

    setMensajesPendientes(
        "ACCESO DENEGADO.",
        "SE TE REDIRIGIRÁ AL INICIO.",
        "sound/fx/denegado.mp3",
        "sound/fx/redireccionando.mp3"
    );
} else {
    localStorage.setItem("entrarB", "NO");
}

function prepararProximaPagina() {
    const nuevoA = Math.floor(1000 + Math.random() * 9000);
    localStorage.setItem("entrarA", nuevoA);
    localStorage.setItem("entrarB", nuevoA);
}

function setRutina(gameName) {
    localStorage.setItem("acumulado", 0);
    localStorage.setItem("pass", 0);
    localStorage.setItem("esrutina", "no");
    localStorage.setItem("esjuego", "si");
    prepararProximaPagina();
}

function goBackToGames() {
    prepararProximaPagina();
    window.location.href = '../../Menu/musica.html';
}

function goToHome() {
    prepararProximaPagina();
    window.location.href = '../../index.html';
}

function setMensajesPendientes(msg1, msg2, aud1, aud2) {
    mensajePendiente = msg1;
    mensajeSecundario = msg2;
    audioPrimero = aud1;
    audioSegundo = aud2;
}

function mostrarMensajesSecuenciales(msg1, msg2, audio1, audio2) {
    const messageEl = document.getElementById("message");
    messageEl.textContent = msg1;
    messageEl.style.display = "block";

    const a1 = new Audio(audio1);
    a1.play().catch(e => console.warn("Error primer audio:", e));

    a1.onended = () => {
        messageEl.textContent = msg2;
        const a2 = new Audio(audio2);
        a2.play().catch(e => console.warn("Error segundo audio:", e));

        a2.onended = () => {
            window.location.href = '../../index.html';
        };
    };
}

window.addEventListener("click", () => {
    if (mensajePendiente && mensajeSecundario) {
        mostrarMensajesSecuenciales(mensajePendiente, mensajeSecundario, audioPrimero, audioSegundo);
        mensajePendiente = null;
        mensajeSecundario = null;
    }
});

/* ===== Sistema catálogo ===== */

/* ===== Sistema catálogo (mejorado) ===== */

let scrollIndex = 0;

function scrollTable(direction) {
    const table = document.getElementById("tableFlex");
    const cells = document.querySelectorAll(".cell");
    const container = document.querySelector(".scroll-container");

    const total = cells.length;
    const itemWidth = cells[0].offsetWidth;
    const containerWidth = container.offsetWidth;

    const visibleItems = Math.round(containerWidth / itemWidth);
    const maxIndex = total - visibleItems;

    scrollIndex += direction;

    if (scrollIndex < 0) scrollIndex = 0;
    if (scrollIndex > maxIndex) scrollIndex = maxIndex;

    table.style.transform = `translateX(-${scrollIndex * itemWidth}px)`;
}

/* Recalcular posición si cambia tamaño de pantalla */
window.addEventListener("resize", () => {
    scrollIndex = 0;
    document.getElementById("tableFlex").style.transform = `translateX(0px)`;
});

</script>
</body>
</html>