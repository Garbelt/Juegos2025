<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Clasificación de Instrumentos</title>
<link rel="stylesheet" href="mensajesdiferente.css">
<link rel="stylesheet" href="botoneria.css">
<link rel="stylesheet" href="estilos.css">
<link rel="stylesheet" href="adaptadores.css">
<link rel="stylesheet" href="pre-game.css">
<style>
   #instrument {
       font-size: 24px;
       margin-bottom: 20px;
   }
   #instrument-container {
       display: flex;
       justify-content: center;
       align-items: center;
       margin-bottom: 10px;
   }
   #instrument {
       width: 75%;
       height: 150px;
       background-color: #ffe5b4;
       border: 2px solid #ccc;
       border-radius: 10px;
       display: flex;
       justify-content: center;
       align-items: center;
       text-transform: uppercase;
       font-weight: bold;
       font-size: clamp(16px, 5vw, 32px);
       text-align: center;
       padding: 10px;
       box-sizing: border-box;
   }

   .modal {
       display: none;
   }
   .modal-content {
       position: fixed;
       top: 50%;
       left: 50%;
       transform: translate(-50%, -50%);
       background-color: #8ec6e6;
       color: black;
       padding: 20px;
       border: 2px solid #333;
       border-radius: 10px;
       font-size: 24px;
       z-index: 9999;
       text-align: center;
       width: 80%;
       max-width: 300px;
   }
</style>
</head>
<body>

<!-- ================= PANTALLA PREVIA ================= -->
<div id="pre-game-screen" style="display: none;">
    <div id="pre-game-container">
        <h1 id="game-title" class="pre-game-title">Clasificación de Instrumentos</h1>
        <p id="game-description" class="pre-game-description">
            Aprende a clasificar los instrumentos según su tipo. Selecciona correctamente para ganar puntos.
        </p>

        <div id="pre-game-buttons">
            <button id="ver-video-btn">Ver Video Explicativo</button>
            <button id="read-screen">Leer Descripción</button>
        </div>

        <button id="continuar-btn" class="btn-continue">Continuar</button>
    </div>

    <!-- Modal de video -->
	<div id="video-modal" class="modal">
 	   <div class="modal-content">
    	    <span id="close-video" style="cursor:pointer;">Cerrar X</span>

   	     <video id="pre-game-video" width="100%" controls>
    	        <source src="videos/explicacion.mp4" type="video/mp4">
    	        Tu navegador no soporta el video.
  	      </video>

 	   </div>
	</div>
</div>

<!-- ================= BOTON INICIAR ================= -->
<div id="start-button-container">
    <button id="start-button" class="disable-clicks">COMENZAR EL JUEGO</button>
</div>

<!-- ================= CONTENIDO DEL JUEGO ================= -->
<div class="container" style="display:none;">
    <table>
        <tr>
            <th colspan="2" class="title-cell" style="text-align: center;">
                <span class="titulo-principal">HOY CLASIFICAMOS...</span><br>
                <span class="titulo-secundario">Tipos de palabras</span>
            </th>
        </tr>
        <tr>
            <td>
                <center><div id="instrument" class="elemento-juego"></div></center>
                <center>
                    <div>
                        <button id="sustantivo-button" class="btn-corregir">SUSTANTIVO</button>
                        <button id="verbo-button" class="btn-corregir">VERBO</button>
                        <button id="adjetivo-button" class="btn-corregir">ADJETIVO</button>
                    </div>
                </center>
            </td>
            <td id="align-left-top" class="celda-panel" style="position: relative;">
                <div id="panel">
                    <div>
                        <div id="actualUsername"></div>
                        <br>
                        <div id="puntaje">Puntaje: 0</div>
                        <div id="reloj">Tiempo: 00:30</div>
                        <div id="errores">Errores: 0/5</div>
                    </div>
                </div>
                <button id="lectorButton">Cancelar Lectura</button>
            </td>
        </tr>
    </table>
</div>

<!-- ================= CONTENIDO DEL JUEGO VERTICAL (MOVIL) ================= -->
<div class="container-vertical" style="display:none;">
    <table>
        <!-- Fila 1: Títulos -->
        <tr>
            <th class="title-cell" style="text-align: center;">
                <span class="titulo-principal">HOY CLASIFICAMOS...</span><br>
                <span class="titulo-secundario">Tipos de palabras</span>
            </th>
        </tr>

        <!-- Fila 2: Juego -->
        <tr>
            <td style="text-align: center; vertical-align: middle;">
                <div id="instrument-vertical" class="elemento-juego"></div>
                <div style="margin-top: 15px;">
                    <button id="sustantivo-button-vertical" class="btn-corregir">SUSTANTIVO</button>
                    <button id="verbo-button-vertical" class="btn-corregir">VERBO</button>
                    <button id="adjetivo-button-vertical" class="btn-corregir">ADJETIVO</button>
                </div>
            </td>
        </tr>

        <!-- Fila 3: Panel de usuario -->
        <tr>
            <td class="celda-panel" style="text-align: left; vertical-align: top;">
                <div id="panel-vertical">
                    <div id="actualUsername-vertical"></div>
                    <br>
                    <div id="puntaje-vertical">Puntaje: 0</div>
                    <div id="reloj-vertical">Tiempo: 00:30</div>
                    <div id="errores-vertical">Errores: 0/5</div>
                </div>
                <!-- Botón de cancelar lectura eliminado para vertical -->
            </td>
        </tr>
    </table>
</div>

<div class="found-message" id="message"></div>

<audio id="background-music" loop>
    <source src="sound/FondoMus.mp3" type="audio/mpeg">
    Tu navegador no soporta la reproducción de audio.
</audio>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-database-compat.js"></script>
<script>
    const firebaseConfig = {
        apiKey: "AIzaSyBVZaysx9d6u6P13DYINPtcinpf79Sgx4U",
        authDomain: "juego001-469b6.firebaseapp.com",
        databaseURL: "https://juego001-469b6-default-rtdb.firebaseio.com",
        projectId: "juego001-469b6",
        storageBucket: "juego001-469b6.appspot.com",
        messagingSenderId: "528847999661",
        appId: "1:528847999661:web:6085a104fe64262a042c24"
    };
    firebase.initializeApp(firebaseConfig);
</script>

<!-- Scripts -->
<script src="lector.js"></script>
<script src="introGame.js"></script>
<script src="verificacionesjuegos.js"></script>
<script src="script.js"></script>
<script src="adaptador-panel.js"></script>

<script>
window.addEventListener("load", () => {
    const actualUsername = localStorage.getItem("ActualUs");
    if (actualUsername) {
        document.getElementById("actualUsername").textContent = `Usuario: ${actualUsername}`;
    }
});

// ===== PANTALLA PREVIA =====
document.getElementById("read-screen").addEventListener("click", () => {
    leerElemento("game-title");
    leerElemento("game-description");
});

document.getElementById("ver-video-btn").addEventListener("click", () => {
    const videoModal = document.getElementById("video-modal");
    const video = document.getElementById("pre-game-video");
    if(video.src){
        videoModal.style.display = "block";
        video.play();
    }
});

document.getElementById("close-video").addEventListener("click", () => {
    const videoModal = document.getElementById("video-modal");
    const video = document.getElementById("tutorial-video");
    video.pause();
    video.currentTime = 0;
    videoModal.style.display = "none";
});

document.getElementById("continuar-btn").addEventListener("click", () => {
    document.getElementById("pre-game-screen").style.display = "none";
    document.querySelector(".container").style.display = "block";
    document.getElementById("background-music").play();
    startGame();
});
</script>

<!-- ================= BOTONERA MÓVIL ================= -->
<div class="mobile-controls">

  <button id="mobile-main-btn"
          class="fab-main"
          aria-label="Mostrar opciones del juego">
    <span aria-hidden="true">☰</span>
  </button>

  <div class="fab-options">

    <button id="mobile-read-btn">
      <span aria-hidden="true">🔊</span>
    </button>

    <button id="mobile-toggle-header-btn">
      <span aria-hidden="true">🧾</span>
    </button>

    <button id="mobile-panel-btn">
      <span aria-hidden="true">📊</span>
    </button>

  </div>
</div>

<script src="botonera-mobile.js"></script>

</body>
</html>